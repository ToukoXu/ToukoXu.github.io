<!DOCTYPE html><html lang="zh" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>迭代器（Iterator）与解构：JS 数据遍历与拆箱的实用指南 | Touko</title><meta name="keywords" content="JavaScript,ES6"><meta name="author" content="Touko"><meta name="copyright" content="Touko"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="迭代器（Iterator）与解构：JS 数据遍历与拆箱的实用指南"><meta name="application-name" content="迭代器（Iterator）与解构：JS 数据遍历与拆箱的实用指南"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="迭代器（Iterator）与解构：JS 数据遍历与拆箱的实用指南"><meta property="og:url" content="http://toukoxu.github.io/archives/iterator/index.html"><meta property="og:site_name" content="Touko"><meta property="og:description" content="迭代器是 JS 统一数据遍历的 “通用接口”，解构则是简化数据提取的 “语法糖”—— 两者结合能让你更优雅地处理数组、对象、DOM 集合等各种数据结构。这篇文章从原理到实战，带你吃透这两个高频用到的核心特性。  一、迭代器：统一数据遍历的 “通用接口”1.1 什么是迭代器？迭代器本质是一套 标准化"><meta property="og:locale" content="zh"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/cover/iterator.webp"><meta property="article:author" content="Touko"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/cover/iterator.webp"><meta name="description" content="迭代器是 JS 统一数据遍历的 “通用接口”，解构则是简化数据提取的 “语法糖”—— 两者结合能让你更优雅地处理数组、对象、DOM 集合等各种数据结构。这篇文章从原理到实战，带你吃透这两个高频用到的核心特性。  一、迭代器：统一数据遍历的 “通用接口”1.1 什么是迭代器？迭代器本质是一套 标准化"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://toukoxu.github.io/archives/iterator/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: undefined,
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: {"enable":true,"ck":"3NsfNkdtkVbxAr4D","LingQueMonitorID":"3NsfQzcXKkH79lbY"},
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: {"mode":"both","api":"https://img2color-go.vercel.app/api?img=","cover_change":true},
  authorStatus: {"skills":["🤖️ 科技爱好者","🔨 开发一条龙","🌌 Hello World 宇宙","⌨️ 键盘撸猫区","🐱 万物皆可rua"]},
  algolia: {"appId":"PYE1KWH569","apiKey":"cf60fd4b204d6ed4fc261c973f2a5489","indexName":"blog","hits":{"per_page":6},"languages":{"input_placeholder":"输入关键词后按下回车查找","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"本文最后一次更新为","messageNext":"天前，文章中的某些内容可能已过时！"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":true,"limitCount":50,"languages":{"author":"作者: Touko","link":"链接: ","source":"来源: Touko","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"},"ignore":["/projects/image-base64","/projects/text-diff"]},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: true,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Touko',
  title: '迭代器（Iterator）与解构：JS 数据遍历与拆箱的实用指南',
  postAI: '',
  pageFillDescription: '一、迭代器：统一数据遍历的 通用接口, 1.1 什么是迭代器？, 1.2 迭代器的三个核心要素, 1.3 可迭代对象：能被遍历的 合格对象, 二、解构：简化数据提取的 语法糖, 2.1 解构的本质：基于迭代器的便捷操作, 2.2 解构的常用能力：告别繁琐的取值, 三、不同数据结构的解构实战, 3.1 字符串解构：按字符拆分, 3.2 数组解构：按位置取值, 3.3 对象解构：按属性名取值, 3.4 Map 解构：按键值对拆分, 3.5 Set 解构：按元素顺序拆分, 3.6 函数参数解构：简化参数处理, 3.7 DOM 集合（NodeList）解构, 3.8 生成器对象解构, 四、高级解构技巧：解决复杂场景, 4.1 动态属性名解构：按变量名提取属性, 4.2 混合解构：处理嵌套复杂的数据, 4.3 解构 + 迭代器：处理分页数据, 五、避坑指南：解构的常见问题, 5.1 普通对象不能用数组解构, 5.2 解构声明必须用 let/const/var, 5.3 默认值只在值为 undefined 时生效, 5.4 嵌套解构时外层属性必须存在, 六、实际应用场景：让代码更优雅, 场景 1：简化函数参数, 场景 2：处理 API 响应, 场景 3：组件 props 处理（以 React 为例）迭代器是统一数据遍历的通用接口解构则是简化数据提取的语法糖两者结合能让你更优雅地处理数组对象集合等各种数据结构这篇文章从原理到实战带你吃透这两个高频用到的核心特性一迭代器统一数据遍历的通用接口什么是迭代器迭代器本质是一套标准化协议定义了如何按顺序访问数据集合的规则简单说只要一个对象实现了这套协议就能用统一的方式比如遍历不管它是数组字符串还是自定义对象举个生活化的例子你有一个文件夹里面有多个文件迭代器就像一个文件读取器它记住当前读到哪个文件每次告诉你下一个文件是什么直到所有文件读完看个自定义迭代器的实现理解它的核心逻辑模拟一个文件夹对象里面有多个文件笔记照片文档实现迭代器协议的核心方法记录当前遍历位置迭代状态返回迭代器对象必须有方法必须返回当前值是否遍历完遍历完设为可省略使用迭代器遍历文件夹笔记照片文档迭代器的三个核心要素要实现迭代器协议必须满足以下三点方法对象必须有这个特殊方法用作为键调用后返回一个迭代器对象方法迭代器对象必须有方法调用后返回结构的对象当前遍历到的值遍历完时可省略布尔值表示还有值表示遍历结束内部状态迭代器需要记录当前遍历位置比如上面的确保每次能拿到下一个值可迭代对象能被遍历的合格对象只要实现了方法的对象它就是可迭代对象中很多原生对象天生就是可迭代的比如数组字符串集合比如的返回值生成器对象生成的对象这些可迭代对象能被以下语法消费即遍历或提取数据循环展开运算符解构赋值把可迭代对象转数组接收可迭代的集合二解构简化数据提取的语法糖解构的本质基于迭代器的便捷操作解构赋值看似是直接拆数据其实底层依赖迭代器协议比如对数组解构时引擎会悄悄做两件事调用数组的方法获取迭代器多次调用迭代器的方法按顺序提取值赋值给变量看个例子理解解构的底层逻辑我们写的解构代码引擎实际执行的逻辑简化版拿到迭代器第一个的值第二个的值这也解释了为什么普通对象不能用数组解构因为普通对象没实现方法不是可迭代对象解构的常用能力告别繁琐的取值解构最核心的价值是少写重复代码比如不用再写这种重复的取值逻辑分享几个高频用法跳过不需要的值用逗号跳过不想取的元素比如只想要数组的第三个值收集剩余值用变量名收集解构后剩下的所有值只能放在最后设置默认值当解构的值是时使用默认值注意不会触发默认值数组解构默认值匿名用户匿名用户对象解构默认值小明交换变量不用临时变量一行代码交换两个变量的值三不同数据结构的解构实战不同数据结构的解构方式略有差异这里整理了日常开发中最常用的种场景附具体代码示例字符串解构按字符拆分字符串是可迭代对象解构时会按单个字符提取基本字符解构收集剩余字符解构字符串的属性对象解构数组解构按位置取值数组解构最常用变量的位置和数组元素的位置一一对应基本解构嵌套数组解构对应数组的嵌套结构部分解构剩余模式解构失败变量的值为不完全解构对象解构按属性名取值对象解构和数组不同变量名必须和对象的属性名一致和属性的顺序无关基本解构变量必须与属性同名与属性的顺序无关基本对象解构重命名变量属性名和变量名不同时用嵌套对象解构对应对象的嵌套结构给对象属性设默认值解构按键值对拆分是键值对集合解构时会按的形式提取每一项中解构键值对输出解构特定键值对第一个键值对第二个键值对的提取所有结合展开运算符解构按元素顺序拆分是唯一值集合解构时按元素插入顺序提取基本解构转数组后解构更灵活函数参数解构简化参数处理函数参数如果是对象或数组用解构能直接提取需要的属性不用再手动对象参数解构常用场景配置项默认宽度默认高度默认图表类型绘制图表尺寸调用时只需传需要修改的配置输出绘制图表尺寸嵌套参数解构住在输出住在集合解构返回的是可迭代对象能直接解构页面中有三个元素首页列表详情解构前两个元素首页转数组后解构支持更多数组方法详情生成器对象解构生成器函数返回的对象是可迭代的解构时会按的顺序提取值生成器函数产生解构生成器对象提取所有值结合展开运算符四高级解构技巧解决复杂场景动态属性名解构按变量名提取属性如果对象的属性名是动态的比如由变量决定可以用变量名来解构接口返回的状态信息属性名是状态码请求成功资源未找到服务器错误动态获取状态码对应的信息资源未找到混合解构处理嵌套复杂的数据实际开发中响应常是对象嵌套数组的结构用混合解构能一步提取关键数据模拟响应数据手机平板混合解构提取第一个商品名总页数数组嵌套对象解构对象嵌套解构状态码第一个商品总页数输出状态码第一个商品手机总页数解构迭代器处理分页数据结合生成器迭代器和解构可以优雅地处理分页数据比如一次获取前三页数据分页数据生成器每次一页数据产出当前页数据没有更多页停止迭代一次获取前三页数据解构前三次的结果提取五避坑指南解构的常见问题普通对象不能用数组解构普通对象没实现迭代器协议直接用数组解构会报错解构声明必须用如果直接写会被引擎解析为代码块导致语法错误错误写法正确写法加默认值只在值为时生效如果解构的值是等假值默认值不会触发是不会用默认值是会用默认值嵌套解构时外层属性必须存在如果嵌套解构的外层属性不存在会报错错误不存在无法解构正确写法给外层属性设默认值不会报错六实际应用场景让代码更优雅场景简化函数参数之前写函数参数要记顺序用解构后直接按属性名取不用关心顺序改造前参数顺序难记新增参数要改调用方式改造后参数清晰支持默认值新增参数不影响旧调用调用时只需传必要参数场景处理响应不用层层一步提取需要的数据直接使用提取的数据解构错误信息获取文章失败场景组件处理以为例组件接收时用解构直接提取需要的属性代码更简洁组件接收默认主题加入购物车使用组件时只需传必要数据耳机加入购物车迭代器和解构是中提升代码优雅度的关键特性迭代器统一了数据遍历的方式解构简化了数据提取的逻辑掌握它们后不管是处理简单的数组对象还是复杂的响应集合都能写出更简洁更易维护的代码',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-06-14 20:46:25',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link href="https://fonts.cdnfonts.com/css/shina-baby" rel="stylesheet"><link rel="alternate" type="application/rss+xml" title="Touko" href="http://toukoxu.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="Touko" href="http://toukoxu.github.io/atom.xml"><link rel="alternate" type="application/json" title="Touko" href="http://toukoxu.github.io/feed.json"><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/site/loading.webp"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://toukoxu.github.io/" title="博客" target="_blank"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">图片工具</div><div class="back-menu-list"><a class="back-menu-item" href="/projects/image-base64" title="图片转Base64" target="_blank"><img class="back-menu-item-icon" src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/gif/picture.gif" alt="图片转Base64"/><span class="back-menu-item-text">图片转Base64</span></a><a class="back-menu-item" href="/projects/image-webp" title="图片转WebP" target="_blank"><img class="back-menu-item-icon" src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/gif/picture.gif" alt="图片转WebP"/><span class="back-menu-item-text">图片转WebP</span></a><a class="back-menu-item" href="/projects/image-compress" title="图片压缩" target="_blank"><img class="back-menu-item-icon" src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/gif/picture.gif" alt="图片压缩"/><span class="back-menu-item-text">图片压缩</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">文本工具</div><div class="back-menu-list"><a class="back-menu-item" href="/projects/text-diff" title="文本差异对比" target="_blank"><img class="back-menu-item-icon" src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/gif/text.gif" alt="文本差异对比"/><span class="back-menu-item-text">文本差异对比</span></a><a class="back-menu-item" href="/projects/image-base64" title="CSS/JS压缩" target="_blank"><img class="back-menu-item-icon" src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/gif/text.gif" alt="CSS/JS压缩"/><span class="back-menu-item-text">CSS/JS压缩</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">金融工具</div><div class="back-menu-list"><a class="back-menu-item" href="/projects/finance-calculator" title="金融计算器" target="_blank"><img class="back-menu-item-icon" src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/gif/star.gif" alt="金融计算器"/><span class="back-menu-item-text">金融计算器</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Touko</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 总览</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/pay/wechat.webp" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/pay/wechat.webp"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/pay/alipay.webp" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/pay/alipay.webp"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">音乐</div><span class="author-content-item-title">灵魂的碰撞💥</span></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">August 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">July 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">June 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/02/"><span class="card-archive-list-date">February 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/05/"><span class="card-archive-list-date">May 2021</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/04/"><span class="card-archive-list-date">April 2021</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/03/"><span class="card-archive-list-date">March 2021</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url">前端</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/JavaScript/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>JavaScript</span></a><a class="article-meta__tags" href="/tags/ES6/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>ES6</span></a></span></div></div><h1 class="post-title" itemprop="name headline">迭代器（Iterator）与解构：JS 数据遍历与拆箱的实用指南</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-06-14T12:46:25.000Z" title="发表于 2024-06-14 20:46:25">2024-06-14</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-06-14T12:46:25.000Z" title="更新于 2024-06-14 20:46:25">2024-06-14</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">3.4k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>13分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="迭代器（Iterator）与解构：JS 数据遍历与拆箱的实用指南"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为上海"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>上海</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/cover/iterator.webp"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://toukoxu.github.io/archives/iterator/"><header><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url">前端</a><a href="/tags/JavaScript/" tabindex="-1" itemprop="url">JavaScript</a><a href="/tags/ES6/" tabindex="-1" itemprop="url">ES6</a><h1 id="CrawlerTitle" itemprop="name headline">迭代器（Iterator）与解构：JS 数据遍历与拆箱的实用指南</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Touko</span><time itemprop="dateCreated datePublished" datetime="2024-06-14T12:46:25.000Z" title="发表于 2024-06-14 20:46:25">2024-06-14</time><time itemprop="dateCreated datePublished" datetime="2024-06-14T12:46:25.000Z" title="更新于 2024-06-14 20:46:25">2024-06-14</time></header><blockquote>
<p>迭代器是 JS 统一数据遍历的 “通用接口”，解构则是简化数据提取的 “语法糖”—— 两者结合能让你更优雅地处理数组、对象、DOM 集合等各种数据结构。这篇文章从原理到实战，带你吃透这两个高频用到的核心特性。</p>
</blockquote>
<h2 id="一、迭代器：统一数据遍历的“通用接口”"><a href="#一、迭代器：统一数据遍历的“通用接口”" class="headerlink" title="一、迭代器：统一数据遍历的“通用接口”"></a>一、迭代器：统一数据遍历的 “通用接口”</h2><h3 id="1-1-什么是迭代器？"><a href="#1-1-什么是迭代器？" class="headerlink" title="1.1 什么是迭代器？"></a>1.1 什么是迭代器？</h3><p>迭代器本质是一套 <strong>标准化协议</strong>（Iterator Protocol），定义了 “如何按顺序访问数据集合” 的规则。简单说：只要一个对象实现了这套协议，就能用统一的方式（比如 <code>for...of</code>）遍历，不管它是数组、字符串还是自定义对象。</p>
<p>举个生活化的例子：你有一个文件夹，里面有多个文件。迭代器就像一个 “文件读取器”—— 它记住当前读到哪个文件，每次告诉你 “下一个文件是什么”，直到所有文件读完。</p>
<p>看个自定义迭代器的实现，理解它的核心逻辑：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模拟一个“文件夹”对象，里面有多个“文件”</span></span><br><span class="line"><span class="keyword">const</span> folder = {</span><br><span class="line">  <span class="attr">files</span>: [<span class="string">'笔记.txt'</span>, <span class="string">'照片.jpg'</span>, <span class="string">'文档.pdf'</span>],</span><br><span class="line">  <span class="comment">// 实现迭代器协议的核心：[Symbol.iterator] 方法</span></span><br><span class="line">  [<span class="title class_">Symbol</span>.<span class="property">iterator</span>]() {</span><br><span class="line">    <span class="keyword">let</span> currentIndex = <span class="number">0</span>; <span class="comment">// 记录当前遍历位置（迭代状态）</span></span><br><span class="line">    <span class="comment">// 返回迭代器对象，必须有 next() 方法</span></span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">next</span>: <span class="function">() =&gt;</span> {</span><br><span class="line">        <span class="comment">// next() 必须返回 { value: 当前值, done: 是否遍历完 }</span></span><br><span class="line">        <span class="keyword">if</span> (currentIndex &lt; <span class="variable language_">this</span>.<span class="property">files</span>.<span class="property">length</span>) {</span><br><span class="line">          <span class="keyword">return</span> {</span><br><span class="line">            <span class="attr">value</span>: <span class="variable language_">this</span>.<span class="property">files</span>[currentIndex++],</span><br><span class="line">            <span class="attr">done</span>: <span class="literal">false</span>,</span><br><span class="line">          };</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">          <span class="comment">// 遍历完，done 设为 true，value 可省略</span></span><br><span class="line">          <span class="keyword">return</span> { <span class="attr">done</span>: <span class="literal">true</span> };</span><br><span class="line">        }</span><br><span class="line">      },</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用迭代器遍历文件夹</span></span><br><span class="line"><span class="keyword">const</span> fileIterator = folder[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fileIterator.<span class="title function_">next</span>()); <span class="comment">// { value: "笔记.txt", done: false }</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fileIterator.<span class="title function_">next</span>()); <span class="comment">// { value: "照片.jpg", done: false }</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fileIterator.<span class="title function_">next</span>()); <span class="comment">// { value: "文档.pdf", done: false }</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fileIterator.<span class="title function_">next</span>()); <span class="comment">// { done: true }</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="1-2-迭代器的三个核心要素"><a href="#1-2-迭代器的三个核心要素" class="headerlink" title="1.2 迭代器的三个核心要素"></a>1.2 迭代器的三个核心要素</h3><p>要实现迭代器协议，必须满足以下三点：</p>
<ol>
<li><strong><code>[Symbol.iterator]</code> 方法</strong>：对象必须有这个特殊方法（用 <code>Symbol.iterator</code> 作为键），调用后返回一个 “迭代器对象”。</li>
<li><strong><code>next()</code> 方法</strong>：迭代器对象必须有 <code>next()</code> 方法，调用后返回 <code>{ value, done }</code> 结构的对象。<ul>
<li><code>value</code>：当前遍历到的值（遍历完时可省略）。</li>
<li><code>done</code>：布尔值，<code>false</code> 表示还有值，<code>true</code> 表示遍历结束。</li>
</ul>
</li>
<li><strong>内部状态</strong>：迭代器需要记录当前遍历位置（比如上面的 <code>currentIndex</code>），确保每次 <code>next()</code> 能拿到下一个值。</li>
</ol>
<h3 id="1-3-可迭代对象：能被遍历的“合格对象”"><a href="#1-3-可迭代对象：能被遍历的“合格对象”" class="headerlink" title="1.3 可迭代对象：能被遍历的“合格对象”"></a>1.3 可迭代对象：能被遍历的 “合格对象”</h3><p>只要实现了 <code>[Symbol.iterator]()</code> 方法的对象，它就是<u>可迭代对象</u>。JS 中很多原生对象天生就是可迭代的，比如：</p>
<ul>
<li>数组、字符串、<code>Map</code>、<code>Set</code>、<code>TypedArray</code></li>
<li>DOM 集合：<code>NodeList</code>（比如 <code>document.querySelectorAll</code> 的返回值）</li>
<li>生成器对象（<code>function*</code> 生成的对象）</li>
</ul>
<p>这些可迭代对象能被以下语法 “消费”（即遍历或提取数据）：</p>
<ul>
<li><code>for...of</code> 循环</li>
<li>展开运算符（<code>...</code>）</li>
<li>解构赋值</li>
<li><code>Array.from()</code>（把可迭代对象转数组）</li>
<li><code>Promise.all()</code>/<code>Promise.race()</code>（接收可迭代的 Promise 集合）</li>
</ul>
<h2 id="二、解构：简化数据提取的“语法糖”"><a href="#二、解构：简化数据提取的“语法糖”" class="headerlink" title="二、解构：简化数据提取的“语法糖”"></a>二、解构：简化数据提取的 “语法糖”</h2><h3 id="2-1-解构的本质：基于迭代器的便捷操作"><a href="#2-1-解构的本质：基于迭代器的便捷操作" class="headerlink" title="2.1 解构的本质：基于迭代器的便捷操作"></a>2.1 解构的本质：基于迭代器的便捷操作</h3><p>解构赋值（Destructuring）看似是 “直接拆数据”，其实底层依赖迭代器协议。比如对数组解构时，JS 引擎会悄悄做两件事：</p>
<ol>
<li>调用数组的 <code>[Symbol.iterator]()</code> 方法，获取迭代器。</li>
<li>多次调用迭代器的 <code>next()</code> 方法，按顺序提取值，赋值给变量。</li>
</ol>
<p>看个例子，理解解构的底层逻辑：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 我们写的解构代码</span></span><br><span class="line"><span class="keyword">const</span> [a, b] = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 引擎实际执行的逻辑（简化版）</span></span><br><span class="line"><span class="keyword">const</span> tempIterator = [<span class="number">1</span>, <span class="number">2</span>][<span class="title class_">Symbol</span>.<span class="property">iterator</span>](); <span class="comment">// 拿到迭代器</span></span><br><span class="line"><span class="keyword">const</span> a = tempIterator.<span class="title function_">next</span>().<span class="property">value</span>; <span class="comment">// 第一个 next() 的值</span></span><br><span class="line"><span class="keyword">const</span> b = tempIterator.<span class="title function_">next</span>().<span class="property">value</span>; <span class="comment">// 第二个 next() 的值</span></span><br></pre></td></tr></tbody></table></figure>

<p>这也解释了为什么 “普通对象不能用数组解构”—— 因为普通对象没实现 <code>[Symbol.iterator]()</code> 方法，不是可迭代对象。</p>
<h3 id="2-2-解构的常用能力：告别繁琐的取值"><a href="#2-2-解构的常用能力：告别繁琐的取值" class="headerlink" title="2.2 解构的常用能力：告别繁琐的取值"></a>2.2 解构的常用能力：告别繁琐的取值</h3><p>解构最核心的价值是 “少写重复代码”，比如不用再写 <code>arr[0]</code>、<code>obj.name</code> 这种重复的取值逻辑。分享几个高频用法：</p>
<ol>
<li><p><strong>跳过不需要的值</strong>：用逗号跳过不想取的元素（比如只想要数组的第三个值）。</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [, , third] = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(third); <span class="comment">// "c"</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p><strong>收集剩余值</strong>：用 <code>...变量名</code> 收集解构后剩下的所有值（只能放在最后）。</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [first, ...rest] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(first); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rest); <span class="comment">// [2, 3, 4]</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p><strong>设置默认值</strong>：当解构的值是 <code>undefined</code> 时，使用默认值（注意：<code>null</code>、<code>0</code>、<code>""</code> 不会触发默认值）。</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数组解构默认值</span></span><br><span class="line"><span class="keyword">const</span> [name = <span class="string">'匿名用户'</span>] = [];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">// "匿名用户"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象解构默认值</span></span><br><span class="line"><span class="keyword">const</span> { age = <span class="number">18</span> } = { <span class="attr">name</span>: <span class="string">'小明'</span> };</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(age); <span class="comment">// 18</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p><strong>交换变量</strong>：不用临时变量，一行代码交换两个变量的值。</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span>,</span><br><span class="line">  y = <span class="number">2</span>;</span><br><span class="line">[x, y] = [y, x]; <span class="comment">// x=2，y=1</span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h2 id="三、不同数据结构的解构实战"><a href="#三、不同数据结构的解构实战" class="headerlink" title="三、不同数据结构的解构实战"></a>三、不同数据结构的解构实战</h2><p>不同数据结构的解构方式略有差异，这里整理了日常开发中最常用的 8 种场景，附具体代码示例：</p>
<h3 id="3-1-字符串解构：按字符拆分"><a href="#3-1-字符串解构：按字符拆分" class="headerlink" title="3.1 字符串解构：按字符拆分"></a>3.1 字符串解构：按字符拆分</h3><p>字符串是可迭代对象，解构时会按单个字符提取：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基本字符解构</span></span><br><span class="line"><span class="keyword">const</span> [firstChar, secondChar] = <span class="string">'JS'</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(firstChar); <span class="comment">// "J"</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(secondChar); <span class="comment">// "S"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 收集剩余字符</span></span><br><span class="line"><span class="keyword">const</span> [head, ...tail] = <span class="string">'JavaScript'</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(head); <span class="comment">// "J"</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tail); <span class="comment">// ["a", "v", "a", "S", "c", "r", "i", "p", "t"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 解构字符串的属性（对象解构）</span></span><br><span class="line"><span class="keyword">const</span> { <span class="attr">length</span>: strLen } = <span class="string">'hello'</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(strLen); <span class="comment">// 5</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-2-数组解构：按位置取值"><a href="#3-2-数组解构：按位置取值" class="headerlink" title="3.2 数组解构：按位置取值"></a>3.2 数组解构：按位置取值</h3><p>数组解构最常用，变量的位置和数组元素的位置一一对应：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基本解构</span></span><br><span class="line"><span class="keyword">const</span> [x, y] = [<span class="number">10</span>, <span class="number">20</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x, y); <span class="comment">// 10 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 嵌套数组解构（对应数组的嵌套结构）</span></span><br><span class="line"><span class="keyword">const</span> [foo, [[bar], baz]] = [<span class="number">1</span>, [[<span class="number">2</span>], <span class="number">3</span>]];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(foo); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(bar); <span class="comment">// 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(baz); <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 部分解构</span></span><br><span class="line"><span class="keyword">const</span> [, , third] = [<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(third); <span class="comment">// "baz"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 剩余模式</span></span><br><span class="line"><span class="keyword">const</span> [head, ...tail] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(head); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tail); <span class="comment">// [2, 3, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 解构失败，变量的值为 undefined</span></span><br><span class="line"><span class="keyword">const</span> [a, b, ...c] = [<span class="string">'a'</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// "a"</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c); <span class="comment">// []</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 不完全解构</span></span><br><span class="line"><span class="keyword">const</span> [d, [e], f] = [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(d); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(e); <span class="comment">// 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(f); <span class="comment">// 4</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-3-对象解构：按属性名取值"><a href="#3-3-对象解构：按属性名取值" class="headerlink" title="3.3 对象解构：按属性名取值"></a>3.3 对象解构：按属性名取值</h3><p>对象解构和数组不同 —— 变量名必须和对象的属性名一致，和属性的顺序无关：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = {</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'Alice'</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">30</span>,</span><br><span class="line">  <span class="attr">address</span>: {</span><br><span class="line">    <span class="attr">city</span>: <span class="string">'London'</span>,</span><br><span class="line">    <span class="attr">zip</span>: <span class="number">10001</span>,</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">hobbies</span>: [<span class="string">'reading'</span>, <span class="string">'hiking'</span>],</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">// 基本解构，变量必须与属性同名，与属性的顺序无关</span></span><br><span class="line"><span class="keyword">const</span> user = {</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'Alice'</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">28</span>,</span><br><span class="line">  <span class="attr">address</span>: {</span><br><span class="line">    <span class="attr">city</span>: <span class="string">'Beijing'</span>,</span><br><span class="line">    <span class="attr">street</span>: <span class="string">'Main St'</span>,</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">// 基本对象解构</span></span><br><span class="line"><span class="keyword">const</span> { name, age } = user;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">// "Alice"</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(age); <span class="comment">// 28</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 重命名变量（属性名和变量名不同时用）</span></span><br><span class="line"><span class="keyword">const</span> { <span class="attr">name</span>: userName } = user;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(userName); <span class="comment">// "Alice"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 嵌套对象解构（对应对象的嵌套结构）</span></span><br><span class="line"><span class="keyword">const</span> {</span><br><span class="line">  <span class="attr">address</span>: { city },</span><br><span class="line">} = user;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(city); <span class="comment">// "Beijing"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 给对象属性设默认值</span></span><br><span class="line"><span class="keyword">const</span> { gender = <span class="string">'unknown'</span> } = user;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(gender); <span class="comment">// "unknown"</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-4-Map-解构：按键值对拆分"><a href="#3-4-Map-解构：按键值对拆分" class="headerlink" title="3.4 Map 解构：按键值对拆分"></a>3.4 Map 解构：按键值对拆分</h3><p><code>Map</code> 是 “键值对集合”，解构时会按 <code>[key, value]</code> 的形式提取每一项：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> userMap = <span class="keyword">new</span> <span class="title class_">Map</span>([</span><br><span class="line">  [<span class="string">'name'</span>, <span class="string">'Bob'</span>],</span><br><span class="line">  [<span class="string">'age'</span>, <span class="number">30</span>],</span><br><span class="line">  [<span class="string">'isAdmin'</span>, <span class="literal">false</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// for...of 中解构键值对</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [key, value] <span class="keyword">of</span> userMap) {</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">${key}</span>: <span class="subst">${value}</span>`</span>);</span><br><span class="line">  <span class="comment">// 输出：name: Bob、age: 30、isAdmin: false</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解构特定键值对</span></span><br><span class="line"><span class="keyword">const</span> [firstEntry, secondEntry] = userMap;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(firstEntry); <span class="comment">// ["name", "Bob"]（第一个键值对）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(secondEntry[<span class="number">1</span>]); <span class="comment">// 30（第二个键值对的 value）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 提取所有 key/value（结合展开运算符）</span></span><br><span class="line"><span class="keyword">const</span> allKeys = [...userMap.<span class="title function_">keys</span>()];</span><br><span class="line"><span class="keyword">const</span> allValues = [...userMap.<span class="title function_">values</span>()];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(allKeys); <span class="comment">// ["name", "age", "isAdmin"]</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-5-Set-解构：按元素顺序拆分"><a href="#3-5-Set-解构：按元素顺序拆分" class="headerlink" title="3.5 Set 解构：按元素顺序拆分"></a>3.5 Set 解构：按元素顺序拆分</h3><p><code>Set</code> 是 “唯一值集合”，解构时按元素插入顺序提取：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> tagSet = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="string">'html'</span>, <span class="string">'css'</span>, <span class="string">'js'</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 基本解构</span></span><br><span class="line"><span class="keyword">const</span> [firstTag, secondTag] = tagSet;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(firstTag); <span class="comment">// "html"</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(secondTag); <span class="comment">// "css"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 转数组后解构（更灵活）</span></span><br><span class="line"><span class="keyword">const</span> tagArray = [...tagSet];</span><br><span class="line"><span class="keyword">const</span> [, , thirdTag] = tagArray;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(thirdTag); <span class="comment">// "js"</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-6-函数参数解构：简化参数处理"><a href="#3-6-函数参数解构：简化参数处理" class="headerlink" title="3.6 函数参数解构：简化参数处理"></a>3.6 函数参数解构：简化参数处理</h3><p>函数参数如果是对象或数组，用解构能直接提取需要的属性，不用再手动 <code>obj.xxx</code>：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 对象参数解构（常用场景：配置项）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">renderChart</span>(<span class="params">{</span></span><br><span class="line"><span class="params">  width = <span class="number">400</span>, // 默认宽度</span></span><br><span class="line"><span class="params">  height = <span class="number">300</span>, // 默认高度</span></span><br><span class="line"><span class="params">  type = <span class="string">'line'</span>, // 默认图表类型</span></span><br><span class="line"><span class="params">}</span>) {</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`绘制 <span class="subst">${type}</span> 图表，尺寸 <span class="subst">${width}</span>x<span class="subst">${height}</span>`</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用时只需传需要修改的配置</span></span><br><span class="line"><span class="title function_">renderChart</span>({ <span class="attr">width</span>: <span class="number">600</span> });</span><br><span class="line"><span class="comment">// 输出：绘制 line 图表，尺寸 600x300</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 嵌套参数解构</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printUser</span>(<span class="params">{ name, address: { city } }</span>) {</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">${name}</span> 住在 <span class="subst">${city}</span>`</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="title function_">printUser</span>({</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'Charlie'</span>,</span><br><span class="line">  <span class="attr">address</span>: { <span class="attr">city</span>: <span class="string">'Shanghai'</span>, <span class="attr">zip</span>: <span class="string">'200000'</span> },</span><br><span class="line">});</span><br><span class="line"><span class="comment">// 输出：Charlie 住在 Shanghai</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-7-DOM-集合（NodeList）解构"><a href="#3-7-DOM-集合（NodeList）解构" class="headerlink" title="3.7 DOM 集合（NodeList）解构"></a>3.7 DOM 集合（NodeList）解构</h3><p><code>document.querySelectorAll</code> 返回的 <code>NodeList</code> 是可迭代对象，能直接解构：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 页面中有三个 .item 元素 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span>列表<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span>详情<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> items = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">'.item'</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 解构前两个元素</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> [homeItem, listItem] = items;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(homeItem.<span class="property">textContent</span>); <span class="comment">// "首页"</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 转数组后解构（支持更多数组方法）</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> [, , detailItem] = [...items];</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(detailItem.<span class="property">textContent</span>); <span class="comment">// "详情"</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-8-生成器对象解构"><a href="#3-8-生成器对象解构" class="headerlink" title="3.8 生成器对象解构"></a>3.8 生成器对象解构</h3><p>生成器函数（<code>function*</code>）返回的对象是可迭代的，解构时会按 <code>yield</code> 的顺序提取值：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 生成器函数：产生 1、2、3</span></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">generateNumbers</span>(<span class="params"></span>) {</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解构生成器对象</span></span><br><span class="line"><span class="keyword">const</span> [num1, num2] = <span class="title function_">generateNumbers</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num1, num2); <span class="comment">// 1 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 提取所有值（结合展开运算符）</span></span><br><span class="line"><span class="keyword">const</span> allNums = [...<span class="title function_">generateNumbers</span>()];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(allNums); <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="四、高级解构技巧：解决复杂场景"><a href="#四、高级解构技巧：解决复杂场景" class="headerlink" title="四、高级解构技巧：解决复杂场景"></a>四、高级解构技巧：解决复杂场景</h2><h3 id="4-1-动态属性名解构：按变量名提取属性"><a href="#4-1-动态属性名解构：按变量名提取属性" class="headerlink" title="4.1 动态属性名解构：按变量名提取属性"></a>4.1 动态属性名解构：按变量名提取属性</h3><p>如果对象的属性名是动态的（比如由变量决定），可以用 <code>[变量名]</code> 来解构：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 接口返回的状态信息，属性名是“status_状态码”</span></span><br><span class="line"><span class="keyword">const</span> apiRes = {</span><br><span class="line">  <span class="attr">status_200</span>: <span class="string">'请求成功'</span>,</span><br><span class="line">  <span class="attr">status_404</span>: <span class="string">'资源未找到'</span>,</span><br><span class="line">  <span class="attr">status_500</span>: <span class="string">'服务器错误'</span>,</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">// 动态获取状态码对应的信息</span></span><br><span class="line"><span class="keyword">const</span> statusCode = <span class="number">404</span>;</span><br><span class="line"><span class="keyword">const</span> { [<span class="string">`status_<span class="subst">${statusCode}</span>`</span>]: message } = apiRes;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(message); <span class="comment">// "资源未找到"</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="4-2-混合解构：处理嵌套复杂的数据"><a href="#4-2-混合解构：处理嵌套复杂的数据" class="headerlink" title="4.2 混合解构：处理嵌套复杂的数据"></a>4.2 混合解构：处理嵌套复杂的数据</h3><p>实际开发中，API 响应常是 “对象嵌套数组” 的结构，用混合解构能一步提取关键数据：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模拟 API 响应数据</span></span><br><span class="line"><span class="keyword">const</span> apiResponse = {</span><br><span class="line">  <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">  <span class="attr">data</span>: {</span><br><span class="line">    <span class="attr">products</span>: [</span><br><span class="line">      { <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">'手机'</span>, <span class="attr">price</span>: <span class="number">5999</span> },</span><br><span class="line">      { <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">'平板'</span>, <span class="attr">price</span>: <span class="number">3999</span> },</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">pagination</span>: { <span class="attr">current</span>: <span class="number">1</span>, <span class="attr">total</span>: <span class="number">10</span> },</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">// 混合解构：提取 code、第一个商品名、总页数</span></span><br><span class="line"><span class="keyword">const</span> {</span><br><span class="line">  code,</span><br><span class="line">  <span class="attr">data</span>: {</span><br><span class="line">    <span class="attr">products</span>: [{ <span class="attr">name</span>: firstProductName }], <span class="comment">// 数组嵌套对象解构</span></span><br><span class="line">    <span class="attr">pagination</span>: { total }, <span class="comment">// 对象嵌套解构</span></span><br><span class="line">  },</span><br><span class="line">} = apiResponse;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`状态码：<span class="subst">${code}</span>，第一个商品：<span class="subst">${firstProductName}</span>，总页数：<span class="subst">${total}</span>`</span>);</span><br><span class="line"><span class="comment">// 输出：状态码：200，第一个商品：手机，总页数：10</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="4-3-解构-迭代器：处理分页数据"><a href="#4-3-解构-迭代器：处理分页数据" class="headerlink" title="4.3 解构 + 迭代器：处理分页数据"></a>4.3 解构 + 迭代器：处理分页数据</h3><p>结合生成器（迭代器）和解构，可以优雅地处理分页数据（比如一次获取前三页数据）：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 分页数据生成器：每次 yield 一页数据</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span>* <span class="title function_">fetchPages</span>(<span class="params">url</span>) {</span><br><span class="line">  <span class="keyword">let</span> page = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) {</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`<span class="subst">${url}</span>?page=<span class="subst">${page}</span>`</span>);</span><br><span class="line">    <span class="keyword">const</span> { data, hasMore } = <span class="keyword">await</span> res.<span class="title function_">json</span>();</span><br><span class="line">    <span class="keyword">yield</span> data; <span class="comment">// 产出当前页数据</span></span><br><span class="line">    <span class="keyword">if</span> (!hasMore) <span class="keyword">break</span>; <span class="comment">// 没有更多页，停止迭代</span></span><br><span class="line">    page++;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 一次获取前三页数据</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getFirstThreePages</span>(<span class="params"></span>) {</span><br><span class="line">  <span class="keyword">const</span> pageGenerator = <span class="title function_">fetchPages</span>(<span class="string">'/api/articles'</span>);</span><br><span class="line">  <span class="comment">// 解构前三次 next() 的结果</span></span><br><span class="line">  <span class="keyword">const</span> [page1, page2, page3] = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>([</span><br><span class="line">    pageGenerator.<span class="title function_">next</span>(),</span><br><span class="line">    pageGenerator.<span class="title function_">next</span>(),</span><br><span class="line">    pageGenerator.<span class="title function_">next</span>(),</span><br><span class="line">  ]).<span class="title function_">then</span>(<span class="function">(<span class="params">results</span>) =&gt;</span> results.<span class="title function_">map</span>(<span class="function">(<span class="params">r</span>) =&gt;</span> r.<span class="property">value</span>)); <span class="comment">// 提取 value</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> { page1, page2, page3 };</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="五、避坑指南：解构的常见问题"><a href="#五、避坑指南：解构的常见问题" class="headerlink" title="五、避坑指南：解构的常见问题"></a>五、避坑指南：解构的常见问题</h2><h3 id="5-1-普通对象不能用数组解构"><a href="#5-1-普通对象不能用数组解构" class="headerlink" title="5.1 普通对象不能用数组解构"></a>5.1 普通对象不能用数组解构</h3><p>普通对象没实现迭代器协议，直接用数组解构会报错：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = { <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> };</span><br><span class="line"><span class="keyword">const</span> [x, y] = obj; <span class="comment">// TypeError: obj is not iterable</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="5-2-解构声明必须用-let-const-var"><a href="#5-2-解构声明必须用-let-const-var" class="headerlink" title="5.2 解构声明必须用 let/const/var"></a>5.2 解构声明必须用 <code>let/const/var</code></h3><p>如果直接写 <code>{ name } = obj</code>，会被引擎解析为 “代码块”，导致语法错误：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 错误写法</span></span><br><span class="line">{ name } = { <span class="attr">name</span>: <span class="string">"Alice"</span> }; <span class="comment">// SyntaxError</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 正确写法：加 const/let</span></span><br><span class="line"><span class="keyword">const</span> { name } = { <span class="attr">name</span>: <span class="string">"Alice"</span> };</span><br></pre></td></tr></tbody></table></figure>

<h3 id="5-3-默认值只在值为-undefined-时生效"><a href="#5-3-默认值只在值为-undefined-时生效" class="headerlink" title="5.3 默认值只在值为 undefined 时生效"></a>5.3 默认值只在值为 <code>undefined</code> 时生效</h3><p>如果解构的值是 <code>null</code>、<code>0</code>、<code>""</code> 等 “假值”，默认值不会触发：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// value 是 null，不会用默认值 10</span></span><br><span class="line"><span class="keyword">const</span> { value = <span class="number">10</span> } = { <span class="attr">value</span>: <span class="literal">null</span> };</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// value 是 undefined，会用默认值 10</span></span><br><span class="line"><span class="keyword">const</span> { value = <span class="number">10</span> } = { <span class="attr">otherKey</span>: <span class="string">'test'</span> };</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// 10</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="5-4-嵌套解构时，外层属性必须存在"><a href="#5-4-嵌套解构时，外层属性必须存在" class="headerlink" title="5.4 嵌套解构时，外层属性必须存在"></a>5.4 嵌套解构时，外层属性必须存在</h3><p>如果嵌套解构的外层属性不存在，会报错：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = { <span class="attr">name</span>: <span class="string">'Dave'</span> };</span><br><span class="line"><span class="comment">// 错误：user.address 不存在，无法解构 city</span></span><br><span class="line"><span class="keyword">const</span> {</span><br><span class="line">  <span class="attr">address</span>: { city },</span><br><span class="line">} = user; <span class="comment">// TypeError: Cannot destructure property 'city' of 'user.address' as it is undefined.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 正确写法：给外层属性设默认值</span></span><br><span class="line"><span class="keyword">const</span> { <span class="attr">address</span>: { city } = {} } = user;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(city); <span class="comment">// undefined（不会报错）</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="六、实际应用场景：让代码更优雅"><a href="#六、实际应用场景：让代码更优雅" class="headerlink" title="六、实际应用场景：让代码更优雅"></a>六、实际应用场景：让代码更优雅</h2><h3 id="场景-1：简化函数参数"><a href="#场景-1：简化函数参数" class="headerlink" title="场景 1：简化函数参数"></a>场景 1：简化函数参数</h3><p>之前写函数参数要记顺序，用解构后直接按属性名取，不用关心顺序：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 改造前：参数顺序难记，新增参数要改调用方式</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createUser</span>(<span class="params">id, name, email, role</span>) {</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 改造后：参数清晰，支持默认值，新增参数不影响旧调用</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createUser</span>(<span class="params">{ id, name, email, role = <span class="string">'user'</span> }</span>) {</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用时只需传必要参数</span></span><br><span class="line"><span class="title function_">createUser</span>({ <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">'Eve'</span>, <span class="attr">email</span>: <span class="string">'eve@test.com'</span> });</span><br></pre></td></tr></tbody></table></figure>

<h3 id="场景-2：处理-API-响应"><a href="#场景-2：处理-API-响应" class="headerlink" title="场景 2：处理 API 响应"></a>场景 2：处理 API 响应</h3><p>不用层层 <code>res.data.xxx</code>，一步提取需要的数据：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getArticleDetail</span>(<span class="params">id</span>) {</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">const</span> {</span><br><span class="line">      <span class="attr">data</span>: {</span><br><span class="line">        <span class="attr">article</span>: { title, content },</span><br><span class="line">        <span class="attr">author</span>: { <span class="attr">name</span>: authorName },</span><br><span class="line">      },</span><br><span class="line">    } = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">`/api/articles/<span class="subst">${id}</span>`</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 直接使用提取的数据</span></span><br><span class="line">    <span class="title function_">renderArticle</span>(title, content, authorName);</span><br><span class="line">  } <span class="keyword">catch</span> ({ message }) {</span><br><span class="line">    <span class="comment">// 解构错误信息</span></span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">`获取文章失败：<span class="subst">${message}</span>`</span>);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="场景-3：组件-props-处理（以-React-为例）"><a href="#场景-3：组件-props-处理（以-React-为例）" class="headerlink" title="场景 3：组件 props 处理（以 React 为例）"></a>场景 3：组件 props 处理（以 React 为例）</h3><p>组件接收 props 时，用解构直接提取需要的属性，代码更简洁：</p>
<figure class="highlight jsx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 组件接收 props</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ProductCard</span> = (<span class="params">{</span></span><br><span class="line"><span class="params">  product: { name, price, image },</span></span><br><span class="line"><span class="params">  theme = <span class="string">'light'</span>, // 默认主题</span></span><br><span class="line"><span class="params">  onAddToCart,</span></span><br><span class="line"><span class="params">}</span>) =&gt; (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">{</span>`<span class="attr">product-card</span> ${<span class="attr">theme</span>}`}&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">{image}</span> <span class="attr">alt</span>=<span class="string">{name}</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>{name}<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>¥{price}<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">{onAddToCart}</span>&gt;</span>加入购物车<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用组件时只需传必要数据</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ProductCard</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">product</span>=<span class="string">{{</span> <span class="attr">name:</span> '<span class="attr">耳机</span>', <span class="attr">price:</span> <span class="attr">799</span>, <span class="attr">image:</span> '<span class="attr">headphone.jpg</span>' }}</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">onAddToCart</span>=<span class="string">{()</span> =&gt;</span> console.log('加入购物车')}</span></span><br><span class="line"><span class="language-xml">/&gt;</span>;</span><br></pre></td></tr></tbody></table></figure>

<hr>
<p>迭代器和解构是 JS 中 “提升代码优雅度” 的关键特性 —— 迭代器统一了数据遍历的方式，解构简化了数据提取的逻辑。掌握它们后，不管是处理简单的数组对象，还是复杂的 API 响应、DOM 集合，都能写出更简洁、更易维护的代码～</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/site/avatar.webp" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/site/avatar.webp" title="头像" alt="头像"></a><div class="post-copyright__author_name">Touko</div><div class="post-copyright__author_desc">🐾猫爪按日出, 按出彩虹糖🌈</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://toukoxu.github.io/archives/iterator/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://toukoxu.github.io/archives/iterator/')">迭代器（Iterator）与解构：JS 数据遍历与拆箱的实用指南</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/pay/wechat.webp" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/pay/wechat.webp" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/pay/alipay.webp" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/pay/alipay.webp" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://toukoxu.github.io/archives/iterator/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://toukoxu.github.io" target="_blank">Touko</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__category-list"><a class="post-meta__box__categoryes" href="/categories/%E5%89%8D%E7%AB%AF/"><span class="categoryes-punctuation"> <i class="anzhiyufont anzhiyu-icon-inbox"></i></span>前端<span class="categoryesPageCount">10</span></a></div><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/JavaScript/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>JavaScript<span class="tagsPageCount">10</span></a><a class="post-meta__box__tags" href="/tags/ES6/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>ES6<span class="tagsPageCount">6</span></a></div></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/archives/event/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/cover/event.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">JS 事件系统完全指南与性能优化</div></div></a></div><div class="next-post pull-right"><a href="/archives/message-channel/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/cover/message-channel.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">MessageChannel 详解：浏览器中的 “点对点双向通信管道”</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/archives/closure/" title="闭包（Closure）：JavaScript 里的 “记忆小助手”"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/cover/closure.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2021-04-03</div><div class="title">闭包（Closure）：JavaScript 里的 “记忆小助手”</div></div></a></div><div><a href="/archives/generator/" title="生成器函数与 yield：掌控函数执行的 “暂停键”"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/cover/generator.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-07-11</div><div class="title">生成器函数与 yield：掌控函数执行的 “暂停键”</div></div></a></div><div><a href="/archives/prototype-chain/" title="原型链（Prototype Chain）与 Class：吃透 JS 对象继承的核心"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/cover/prototype-chain.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2021-05-02</div><div class="title">原型链（Prototype Chain）与 Class：吃透 JS 对象继承的核心</div></div></a></div><div><a href="/archives/proxy/" title="代理（Proxy）：ES6 元编程的 “对象拦截器”"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/cover/proxy.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-08-15</div><div class="title">代理（Proxy）：ES6 元编程的 “对象拦截器”</div></div></a></div><div><a href="/archives/reflect/" title="Reflect：ES6 标准化对象操作的 “工具库”"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/cover/reflect.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-08-14</div><div class="title">Reflect：ES6 标准化对象操作的 “工具库”</div></div></a></div><div><a href="/archives/async+await/" title="Async &#x2F; Await：用同步的方式写异步，真香！"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/cover/async.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-07-13</div><div class="title">Async &#x2F; Await：用同步的方式写异步，真香！</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/site/avatar.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/emoji/sparkles.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">欢迎来到我的<b style="color:#fff">编程小天地</b>！这里有可爱的<b style="color:#fff">编程知识点</b>，致力于把复杂的概念变得<b style="color:#fff">简单可爱</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">一起探索，让代码生活更精彩！</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/about/"><h1 class="author-info__name">Touko</h1><div class="author-info__desc">🐾猫爪按日出, 按出彩虹糖🌈</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/ToukoXu" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">😊 欢迎来看我的博客鸭~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E8%BF%AD%E4%BB%A3%E5%99%A8%EF%BC%9A%E7%BB%9F%E4%B8%80%E6%95%B0%E6%8D%AE%E9%81%8D%E5%8E%86%E7%9A%84%E2%80%9C%E9%80%9A%E7%94%A8%E6%8E%A5%E5%8F%A3%E2%80%9D"><span class="toc-number">1.</span> <span class="toc-text">一、迭代器：统一数据遍历的 “通用接口”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E4%BB%80%E4%B9%88%E6%98%AF%E8%BF%AD%E4%BB%A3%E5%99%A8%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 什么是迭代器？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E8%BF%AD%E4%BB%A3%E5%99%A8%E7%9A%84%E4%B8%89%E4%B8%AA%E6%A0%B8%E5%BF%83%E8%A6%81%E7%B4%A0"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 迭代器的三个核心要素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1%EF%BC%9A%E8%83%BD%E8%A2%AB%E9%81%8D%E5%8E%86%E7%9A%84%E2%80%9C%E5%90%88%E6%A0%BC%E5%AF%B9%E8%B1%A1%E2%80%9D"><span class="toc-number">1.3.</span> <span class="toc-text">1.3 可迭代对象：能被遍历的 “合格对象”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E8%A7%A3%E6%9E%84%EF%BC%9A%E7%AE%80%E5%8C%96%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96%E7%9A%84%E2%80%9C%E8%AF%AD%E6%B3%95%E7%B3%96%E2%80%9D"><span class="toc-number">2.</span> <span class="toc-text">二、解构：简化数据提取的 “语法糖”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E8%A7%A3%E6%9E%84%E7%9A%84%E6%9C%AC%E8%B4%A8%EF%BC%9A%E5%9F%BA%E4%BA%8E%E8%BF%AD%E4%BB%A3%E5%99%A8%E7%9A%84%E4%BE%BF%E6%8D%B7%E6%93%8D%E4%BD%9C"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 解构的本质：基于迭代器的便捷操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E8%A7%A3%E6%9E%84%E7%9A%84%E5%B8%B8%E7%94%A8%E8%83%BD%E5%8A%9B%EF%BC%9A%E5%91%8A%E5%88%AB%E7%B9%81%E7%90%90%E7%9A%84%E5%8F%96%E5%80%BC"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 解构的常用能力：告别繁琐的取值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%B8%8D%E5%90%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E8%A7%A3%E6%9E%84%E5%AE%9E%E6%88%98"><span class="toc-number">3.</span> <span class="toc-text">三、不同数据结构的解构实战</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%A7%A3%E6%9E%84%EF%BC%9A%E6%8C%89%E5%AD%97%E7%AC%A6%E6%8B%86%E5%88%86"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 字符串解构：按字符拆分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E6%95%B0%E7%BB%84%E8%A7%A3%E6%9E%84%EF%BC%9A%E6%8C%89%E4%BD%8D%E7%BD%AE%E5%8F%96%E5%80%BC"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 数组解构：按位置取值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%AF%B9%E8%B1%A1%E8%A7%A3%E6%9E%84%EF%BC%9A%E6%8C%89%E5%B1%9E%E6%80%A7%E5%90%8D%E5%8F%96%E5%80%BC"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 对象解构：按属性名取值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-Map-%E8%A7%A3%E6%9E%84%EF%BC%9A%E6%8C%89%E9%94%AE%E5%80%BC%E5%AF%B9%E6%8B%86%E5%88%86"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 Map 解构：按键值对拆分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-Set-%E8%A7%A3%E6%9E%84%EF%BC%9A%E6%8C%89%E5%85%83%E7%B4%A0%E9%A1%BA%E5%BA%8F%E6%8B%86%E5%88%86"><span class="toc-number">3.5.</span> <span class="toc-text">3.5 Set 解构：按元素顺序拆分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E8%A7%A3%E6%9E%84%EF%BC%9A%E7%AE%80%E5%8C%96%E5%8F%82%E6%95%B0%E5%A4%84%E7%90%86"><span class="toc-number">3.6.</span> <span class="toc-text">3.6 函数参数解构：简化参数处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-DOM-%E9%9B%86%E5%90%88%EF%BC%88NodeList%EF%BC%89%E8%A7%A3%E6%9E%84"><span class="toc-number">3.7.</span> <span class="toc-text">3.7 DOM 集合（NodeList）解构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-8-%E7%94%9F%E6%88%90%E5%99%A8%E5%AF%B9%E8%B1%A1%E8%A7%A3%E6%9E%84"><span class="toc-number">3.8.</span> <span class="toc-text">3.8 生成器对象解构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E9%AB%98%E7%BA%A7%E8%A7%A3%E6%9E%84%E6%8A%80%E5%B7%A7%EF%BC%9A%E8%A7%A3%E5%86%B3%E5%A4%8D%E6%9D%82%E5%9C%BA%E6%99%AF"><span class="toc-number">4.</span> <span class="toc-text">四、高级解构技巧：解决复杂场景</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E5%8A%A8%E6%80%81%E5%B1%9E%E6%80%A7%E5%90%8D%E8%A7%A3%E6%9E%84%EF%BC%9A%E6%8C%89%E5%8F%98%E9%87%8F%E5%90%8D%E6%8F%90%E5%8F%96%E5%B1%9E%E6%80%A7"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 动态属性名解构：按变量名提取属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E6%B7%B7%E5%90%88%E8%A7%A3%E6%9E%84%EF%BC%9A%E5%A4%84%E7%90%86%E5%B5%8C%E5%A5%97%E5%A4%8D%E6%9D%82%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 混合解构：处理嵌套复杂的数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E8%A7%A3%E6%9E%84-%E8%BF%AD%E4%BB%A3%E5%99%A8%EF%BC%9A%E5%A4%84%E7%90%86%E5%88%86%E9%A1%B5%E6%95%B0%E6%8D%AE"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 解构 + 迭代器：处理分页数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E9%81%BF%E5%9D%91%E6%8C%87%E5%8D%97%EF%BC%9A%E8%A7%A3%E6%9E%84%E7%9A%84%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="toc-number">5.</span> <span class="toc-text">五、避坑指南：解构的常见问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E6%99%AE%E9%80%9A%E5%AF%B9%E8%B1%A1%E4%B8%8D%E8%83%BD%E7%94%A8%E6%95%B0%E7%BB%84%E8%A7%A3%E6%9E%84"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 普通对象不能用数组解构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E8%A7%A3%E6%9E%84%E5%A3%B0%E6%98%8E%E5%BF%85%E9%A1%BB%E7%94%A8-let-const-var"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 解构声明必须用 let&#x2F;const&#x2F;var</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E9%BB%98%E8%AE%A4%E5%80%BC%E5%8F%AA%E5%9C%A8%E5%80%BC%E4%B8%BA-undefined-%E6%97%B6%E7%94%9F%E6%95%88"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 默认值只在值为 undefined 时生效</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-%E5%B5%8C%E5%A5%97%E8%A7%A3%E6%9E%84%E6%97%B6%EF%BC%8C%E5%A4%96%E5%B1%82%E5%B1%9E%E6%80%A7%E5%BF%85%E9%A1%BB%E5%AD%98%E5%9C%A8"><span class="toc-number">5.4.</span> <span class="toc-text">5.4 嵌套解构时，外层属性必须存在</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A%E8%AE%A9%E4%BB%A3%E7%A0%81%E6%9B%B4%E4%BC%98%E9%9B%85"><span class="toc-number">6.</span> <span class="toc-text">六、实际应用场景：让代码更优雅</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF-1%EF%BC%9A%E7%AE%80%E5%8C%96%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="toc-number">6.1.</span> <span class="toc-text">场景 1：简化函数参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF-2%EF%BC%9A%E5%A4%84%E7%90%86-API-%E5%93%8D%E5%BA%94"><span class="toc-number">6.2.</span> <span class="toc-text">场景 2：处理 API 响应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF-3%EF%BC%9A%E7%BB%84%E4%BB%B6-props-%E5%A4%84%E7%90%86%EF%BC%88%E4%BB%A5-React-%E4%B8%BA%E4%BE%8B%EF%BC%89"><span class="toc-number">6.3.</span> <span class="toc-text">场景 3：组件 props 处理（以 React 为例）</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/archives/proxy/" title="代理（Proxy）：ES6 元编程的 “对象拦截器”"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/cover/proxy.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="代理（Proxy）：ES6 元编程的 “对象拦截器”"/></a><div class="content"><a class="title" href="/archives/proxy/" title="代理（Proxy）：ES6 元编程的 “对象拦截器”">代理（Proxy）：ES6 元编程的 “对象拦截器”</a><time datetime="2024-08-15T12:46:25.000Z" title="发表于 2024-08-15 20:46:25">2024-08-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/archives/reflect/" title="Reflect：ES6 标准化对象操作的 “工具库”"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/cover/reflect.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Reflect：ES6 标准化对象操作的 “工具库”"/></a><div class="content"><a class="title" href="/archives/reflect/" title="Reflect：ES6 标准化对象操作的 “工具库”">Reflect：ES6 标准化对象操作的 “工具库”</a><time datetime="2024-08-14T12:46:25.000Z" title="发表于 2024-08-14 20:46:25">2024-08-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/archives/async+await/" title="Async / Await：用同步的方式写异步，真香！"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/cover/async.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Async / Await：用同步的方式写异步，真香！"/></a><div class="content"><a class="title" href="/archives/async+await/" title="Async / Await：用同步的方式写异步，真香！">Async / Await：用同步的方式写异步，真香！</a><time datetime="2024-07-13T12:46:25.000Z" title="发表于 2024-07-13 20:46:25">2024-07-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/archives/generator/" title="生成器函数与 yield：掌控函数执行的 “暂停键”"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/cover/generator.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="生成器函数与 yield：掌控函数执行的 “暂停键”"/></a><div class="content"><a class="title" href="/archives/generator/" title="生成器函数与 yield：掌控函数执行的 “暂停键”">生成器函数与 yield：掌控函数执行的 “暂停键”</a><time datetime="2024-07-11T12:46:25.000Z" title="发表于 2024-07-11 20:46:25">2024-07-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/archives/message-channel/" title="MessageChannel 详解：浏览器中的 “点对点双向通信管道”"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/cover/message-channel.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MessageChannel 详解：浏览器中的 “点对点双向通信管道”"/></a><div class="content"><a class="title" href="/archives/message-channel/" title="MessageChannel 详解：浏览器中的 “点对点双向通信管道”">MessageChannel 详解：浏览器中的 “点对点双向通信管道”</a><time datetime="2024-06-23T12:46:25.000Z" title="发表于 2024-06-23 20:46:25">2024-06-23</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:toukoxu@qq.com" title="给我发邮件" target="_blank"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" href="/atom.xml" title="RSS" target="_blank"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/site/avatar.webp" size="50px"/><a class="deal_link" href="https://github.com/toukoxu" title="Github" target="_blank"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" href="/copyright" title="CC" target="_blank"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i></a></div><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shields.io/badge/Touko-%E5%8D%96%E5%8A%9B%E4%B8%8A%E7%8F%AD%E4%B8%AD-white?style=social&amp;logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiPjxwYXRoIGZpbGw9IiNmZmMxMDciIGQ9Im0xNC41IDcuOTk1YzAtLjQxNC0uMzM2LS43NS0uNzUtLjc1LTMuMDMyIDAtNS41LTIuNDY4LTUuNS01LjUgMC0uNDE0LS4zMzYtLjc1LS43NS0uNzVzLS43NS4zMzYtLjc1Ljc1YzAgMy4wMzItMi40NjggNS41LTUuNSA1LjUtLjQxNCAwLS43NS4zMzYtLjc1Ljc1cy4zMzYuNzUuNzUuNzVjMy4wMzIgMCA1LjUgMi40NjggNS41IDUuNSAwIC40MTQuMzM2Ljc1Ljc1Ljc1cy43NS0uMzM2Ljc1LS43NWMwLTMuMDMyIDIuNDY4LTUuNSA1LjUtNS41LjQxNCAwIC43NS0uMzM2Ljc1LS43NXoiLz48cGF0aCBmaWxsPSIjZmZjMTA3IiBkPSJtMjEuNSAxNi4yNDVjLTIuNDgxIDAtNC41LTIuMDE5LTQuNS00LjUgMC0uNDE0LS4zMzYtLjc1LS43NS0uNzVzLS43NS4zMzYtLjc1Ljc1YzAgMi40ODEtMi4wMTkgNC41LTQuNSA0LjUtLjQxNCAwLS43NS4zMzYtLjc1Ljc1cy4zMzYuNzUuNzUuNzVjMi40ODEgMCA0LjUgMi4wMTkgNC41IDQuNSAwIC40MTQuMzM2Ljc1Ljc1Ljc1cy43NS0uMzM2Ljc1LS43NWMwLTIuNDgxIDIuMDE5LTQuNSA0LjUtNC41LjQxNCAwIC43NS0uMzM2Ljc1LS43NXMtLjMzNi0uNzUtLjc1LS43NXoiLz48ZyBmaWxsPSIjZmZjYTI4Ij48cGF0aCBkPSJtMjMuMjUgNC4yNDVjLTEuOTMgMC0zLjUtMS41Ny0zLjUtMy41IDAtLjQxNC0uMzM2LS43NS0uNzUtLjc1cy0uNzUuMzM2LS43NS43NWMwIDEuOTMtMS41NyAzLjUtMy41IDMuNS0uNDE0IDAtLjc1LjMzNi0uNzUuNzVzLjMzNi43NS43NS43NWMxLjkzIDAgMy41IDEuNTcgMy41IDMuNSAwIC40MTQuMzM2Ljc1Ljc1Ljc1cy43NS0uMzM2Ljc1LS43NWMwLTEuOTMgMS41Ny0zLjUgMy41LTMuNS40MTQgMCAuNzUtLjMzNi43NS0uNzVzLS4zMzYtLjc1LS43NS0uNzV6Ii8+PHBhdGggZD0ibTguNzUgMTkuMjQ1Yy0xLjM3OSAwLTIuNS0xLjEyMS0yLjUtMi41IDAtLjQxNC0uMzM2LS43NS0uNzUtLjc1cy0uNzUuMzM2LS43NS43NWMwIDEuMzc5LTEuMTIxIDIuNS0yLjUgMi41LS40MTQgMC0uNzUuMzM2LS43NS43NXMuMzM2Ljc1Ljc1Ljc1YzEuMzc5IDAgMi41IDEuMTIxIDIuNSAyLjUgMCAuNDE0LjMzNi43NS43NS43NXMuNzUtLjMzNi43NS0uNzVjMC0xLjM3OSAxLjEyMS0yLjUgMi41LTIuNS40MTQgMCAuNzUtLjMzNi43NS0uNzVzLS4zMzYtLjc1LS43NS0uNzV6Ii8+PC9nPjwvc3ZnPg==" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"/><div id="runtimeTextTip"></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://www.dogecloud.com/" style="margin-inline:5px" data-title="本站使用jsDelivr为静态资源提供CDN加速" title="本站使用jsDelivr为静态资源提供CDN加速"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shields.io/badge/CDN-jsDelivr-E84D3D.svg?logo=jsdelivr" alt="本站使用jsDelivr为静态资源提供CDN加速"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shields.io/badge/Source-GitHub-181717.svg?logo=github" alt="本站项目由Github托管"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="Touko" target="_blank">Touko</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType () {
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      if (true) {
        const from = '出自 ' + data.from
        const sub = ["晨光温柔&#44; 晚风清甜&#44; 岁岁无忧&#44; 步步生暖."]
        sub.unshift(data.hitokoto, from)
        window.typed = new Typed('#footer-type-tips', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('footer-type-tips').innerHTML = data.hitokoto
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.cbd.int/typed.js@2.1.0/dist/typed.umd.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div></div><div class="footer-bar-right"></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">10</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">1</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://toukoxu.github.io/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">图片工具</div><div class="back-menu-list"><a class="back-menu-item" href="/projects/image-base64" title="图片转Base64"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/gif/picture.gif" alt="图片转Base64"/><span class="back-menu-item-text">图片转Base64</span></a><a class="back-menu-item" href="/projects/image-webp" title="图片转WebP"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/gif/picture.gif" alt="图片转WebP"/><span class="back-menu-item-text">图片转WebP</span></a><a class="back-menu-item" href="/projects/image-compress" title="图片压缩"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/gif/picture.gif" alt="图片压缩"/><span class="back-menu-item-text">图片压缩</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">文本工具</div><div class="back-menu-list"><a class="back-menu-item" href="/projects/text-diff" title="文本差异对比"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/gif/text.gif" alt="文本差异对比"/><span class="back-menu-item-text">文本差异对比</span></a><a class="back-menu-item" href="/projects/image-base64" title="CSS/JS压缩"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/gif/text.gif" alt="CSS/JS压缩"/><span class="back-menu-item-text">CSS/JS压缩</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">金融工具</div><div class="back-menu-list"><a class="back-menu-item" href="/projects/finance-calculator" title="金融计算器"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/toukoxu/picstore@main/images/gif/star.gif" alt="金融计算器"/><span class="back-menu-item-text">金融计算器</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 总览</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/ES2017-ES8/" style="font-size: 0.88rem;">ES2017(ES8)<sup>1</sup></a><a href="/tags/ES6/" style="font-size: 0.88rem;">ES6<sup>6</sup></a><a href="/tags/JavaScript/" style="font-size: 0.88rem; font-weight: 500; color: var(--anzhiyu-lighttext)">JavaScript<sup>10</sup></a><a href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" style="font-size: 0.88rem;">性能优化<sup>6</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"><a class="tag-list" href="/tags/JavaScript" title="JavaScript">JavaScript</a><a class="tag-list" href="/tags/Vue" title="Vue">Vue</a></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.2/dist/svg-pan-zoom.min.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [`叮！可爱加载中... `, `🐱`];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `%c ${ascll[0]} %c${ascll[1]}`,
      "color:white; background-color:#f0ad4e",
      ''
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "你正在访问 Touko 的博客.",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("04/01/2021 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "https://img.shields.io/badge/Touko-%E4%B8%8B%E7%8F%AD%E5%95%A6~-white?style=social&amp;logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiPjxwYXRoIGZpbGw9IiNmZmMxMDciIGQ9Im0xNC41IDcuOTk1YzAtLjQxNC0uMzM2LS43NS0uNzUtLjc1LTMuMDMyIDAtNS41LTIuNDY4LTUuNS01LjUgMC0uNDE0LS4zMzYtLjc1LS43NS0uNzVzLS43NS4zMzYtLjc1Ljc1YzAgMy4wMzItMi40NjggNS41LTUuNSA1LjUtLjQxNCAwLS43NS4zMzYtLjc1Ljc1cy4zMzYuNzUuNzUuNzVjMy4wMzIgMCA1LjUgMi40NjggNS41IDUuNSAwIC40MTQuMzM2Ljc1Ljc1Ljc1cy43NS0uMzM2Ljc1LS43NWMwLTMuMDMyIDIuNDY4LTUuNSA1LjUtNS41LjQxNCAwIC43NS0uMzM2Ljc1LS43NXoiLz48cGF0aCBmaWxsPSIjZmZjMTA3IiBkPSJtMjEuNSAxNi4yNDVjLTIuNDgxIDAtNC41LTIuMDE5LTQuNS00LjUgMC0uNDE0LS4zMzYtLjc1LS43NS0uNzVzLS43NS4zMzYtLjc1Ljc1YzAgMi40ODEtMi4wMTkgNC41LTQuNSA0LjUtLjQxNCAwLS43NS4zMzYtLjc1Ljc1cy4zMzYuNzUuNzUuNzVjMi40ODEgMCA0LjUgMi4wMTkgNC41IDQuNSAwIC40MTQuMzM2Ljc1Ljc1Ljc1cy43NS0uMzM2Ljc1LS43NWMwLTIuNDgxIDIuMDE5LTQuNSA0LjUtNC41LjQxNCAwIC43NS0uMzM2Ljc1LS43NXMtLjMzNi0uNzUtLjc1LS43NXoiLz48ZyBmaWxsPSIjZmZjYTI4Ij48cGF0aCBkPSJtMjMuMjUgNC4yNDVjLTEuOTMgMC0zLjUtMS41Ny0zLjUtMy41IDAtLjQxNC0uMzM2LS43NS0uNzUtLjc1cy0uNzUuMzM2LS43NS43NWMwIDEuOTMtMS41NyAzLjUtMy41IDMuNS0uNDE0IDAtLjc1LjMzNi0uNzUuNzVzLjMzNi43NS43NS43NWMxLjkzIDAgMy41IDEuNTcgMy41IDMuNSAwIC40MTQuMzM2Ljc1Ljc1Ljc1cy43NS0uMzM2Ljc1LS43NWMwLTEuOTMgMS41Ny0zLjUgMy41LTMuNS40MTQgMCAuNzUtLjMzNi43NS0uNzVzLS4zMzYtLjc1LS43NS0uNzV6Ii8+PHBhdGggZD0ibTguNzUgMTkuMjQ1Yy0xLjM3OSAwLTIuNS0xLjEyMS0yLjUtMi41IDAtLjQxNC0uMzM2LS43NS0uNzUtLjc1cy0uNzUuMzM2LS43NS43NWMwIDEuMzc5LTEuMTIxIDIuNS0yLjUgMi41LS40MTQgMC0uNzUuMzM2LS43NS43NXMuMzM2Ljc1Ljc1Ljc1YzEuMzc5IDAgMi41IDEuMTIxIDIuNSAyLjUgMCAuNDE0LjMzNi43NS43NS43NXMuNzUtLjMzNi43NS0uNzVjMC0xLjM3OSAxLjEyMS0yLjUgMi41LTIuNS40MTQgMCAuNzUtLjMzNi43NS0uNzVzLS4zMzYtLjc1LS43NS0uNzV6Ii8+PC9nPjwvc3ZnPg==";
        img.title = "下班了就该开开心心的玩耍，嘿嘿~";
        img.alt = "下班了就该开开心心的玩耍，嘿嘿~";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><script src="https://cdn.cbd.int/algoliasearch@4.18.0/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.cbd.int/instantsearch.js@4.60.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc?.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
          const svgElement = document.getElementById(mermaidID)
          const viewBox = svgElement.getAttribute('viewBox')
          const viewBoxValues = viewBox.split(/[\s,]+/)
          window.svgPanZoom ? svgPanZoom(svgElement, { contain: true, controlIconsEnabled: true }) : ''
          const width = Number(getComputedStyle(svgElement).getPropertyValue('width').slice(0, -2))
          svgElement.setAttribute('height', `${viewBoxValues[3] * width / viewBoxValues[2]}px`)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.cbd.int/mermaid@10.2.4/dist/mermaid.min.js').then(runMermaid)
  }

  anzhiyu.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'BsIRp7GQE8IZ5fkI0JRj8Vys-gzGzoHsz',
      appKey: 'vla82YKrFnfwtuQfgoaDnzu9',
      avatar: 'mp',
      serverURLs: 'https://bsirp7gq.lc-cn-n1-shared.com',
      emojiMaps: {"3d眼镜":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/3d眼镜.png","EDG":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/EDG.png","LPL":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/LPL.png","beluga":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/beluga.png","不好意思":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/不好意思.png","不服吗":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/不服吗.png","亲亲":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/亲亲.png","伞兵":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/伞兵.png","倚墙笑":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/倚墙笑.png","值得肯定":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/值得肯定.png","偷偷看":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/偷偷看.png","傻笑":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/傻笑.png","再见":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/再见.png","出家人":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/出家人.png","击剑":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/击剑.png","加班":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/加班.png","勉强笑":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/勉强笑.png","危险":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/危险.png","发红包":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/发红包.png","吃手":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/吃手.png","吃瓜":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/吃瓜.png","吐血":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/吐血.png","吵架":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/吵架.png","呦吼":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/呦吼.png","呲牙笑":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/呲牙笑.png","哈士奇":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/哈士奇.png","哈士奇失去意识":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/哈士奇失去意识.png","哈士奇失望":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/哈士奇失望.png","哭泣":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/哭泣.png","唱歌":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/唱歌.png","喜欢":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/喜欢.png","嘿哈":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/嘿哈.png","大笑":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/大笑.png","失去信号":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/失去信号.png","失望":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/失望.png","头秃":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/头秃.png","奋斗":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/奋斗.png","好奇":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/好奇.png","好的":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/好的.png","害羞":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/害羞.png","小丑":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/小丑.png","小偷":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/小偷.png","尬笑":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/尬笑.png","尴尬":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/尴尬.png","应援":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/应援.png","开心":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/开心.png","引起不适":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/引起不适.png","微笑":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/微笑.png","思考":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/思考.png","恶心":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/恶心.png","恶魔":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/恶魔.png","恶魔恐惧":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/恶魔恐惧.png","惊吓":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/惊吓.png","惊吓白眼":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/惊吓白眼.png","惊讶":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/惊讶.png","惬意":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/惬意.png","感动":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/感动.png","愤怒":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/愤怒.png","我看好你":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/我看好你.png","手机相机":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/手机相机.png","打咩":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/打咩.png","打牌":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/打牌.png","托腮":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/托腮.png","扶额":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/扶额.png","抠鼻":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/抠鼻.png","抬眼镜":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/抬眼镜.png","拜托":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/拜托.png","捂嘴笑":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/捂嘴笑.png","捂脸":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/捂脸.png","擦汗":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/擦汗.png","放鞭炮":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/放鞭炮.png","敬礼":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/敬礼.png","整理发型":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/整理发型.png","斗鸡眼":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/斗鸡眼.png","智慧的眼神":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/智慧的眼神.png","月饼":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/月饼.png","有没有搞错":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/有没有搞错.png","正确":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/正确.png","没招":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/没招.png","波吉":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/波吉.png","泪奔":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/泪奔.png","流汗微笑":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/流汗微笑.png","流鼻涕":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/流鼻涕.png","深思":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/深思.png","滑稽":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/滑稽.png","滑稽吃瓜":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/滑稽吃瓜.png","滑稽喝水":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/滑稽喝水.png","滑稽奶茶":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/滑稽奶茶.png","滑稽柠檬":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/滑稽柠檬.png","滑稽狂汗":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/滑稽狂汗.png","滑稽被子":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/滑稽被子.png","烦恼":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/烦恼.png","熊熊":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/熊熊.png","熊猫":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/熊猫.png","熊猫唱歌":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/熊猫唱歌.png","熊猫喜欢":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/熊猫喜欢.png","熊猫失望":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/熊猫失望.png","熊猫意外":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/熊猫意外.png","熬夜":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/熬夜.png","爆炸":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/爆炸.png","牛年进宝":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/牛年进宝.png","狂热":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/狂热.png","狗头":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/狗头.png","狗头围脖":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/狗头围脖.png","狗头失望":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/狗头失望.png","狗头意外":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/狗头意外.png","狗头胖次":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/狗头胖次.png","狗头花":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/狗头花.png","狗头草":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/狗头草.png","猪头":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/猪头.png","猪头意外":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/猪头意外.png","生病":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/生病.png","电话":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/电话.png","疑问":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/疑问.png","疼痛":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/疼痛.png","痛哭":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/痛哭.png","看穿一切":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/看穿一切.png","眩晕":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/眩晕.png","睡觉":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/睡觉.png","禁言":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/禁言.png","笑哭":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/笑哭.png","纠结":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/纠结.png","绿帽":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/绿帽.png","缺牙笑":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/缺牙笑.png","翻白眼":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/翻白眼.png","老虎意外":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/老虎意外.png","耍酷":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/耍酷.png","胡子":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/胡子.png","菜狗":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/菜狗.png","菜狗花":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/菜狗花.png","蒙面滑稽":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/蒙面滑稽.png","虎年进宝":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/虎年进宝.png","被打":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/被打.png","裂开":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/裂开.png","警告":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/警告.png","读书":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/读书.png","财神红包":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/财神红包.png","超爱":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/超爱.png","这是啥":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/这是啥.png","送福":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/送福.png","送花":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/送花.png","错误":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/错误.png","阴险":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/阴险.png","难以置信":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/难以置信.png","面具":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/面具.png","饥渴":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/饥渴.png","鬼脸":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/鬼脸.png","黑线":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/黑线.png","鼓掌":"https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/鼓掌.png"},
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await getScript('https://cdn.cbd.int/valine@1.5.1/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Valine' === 'Valine' || !true) {
    if (true) anzhiyu.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script src="https://cdn.cbd.int/blueimp-md5@2.19.0/js/md5.min.js"></script><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getIcon = (icon, mail) => {
    if (icon) return icon
    let defaultIcon = '?d=mp'
    let iconUrl = `https://gravatar.loli.net/avatar/${md5(mail.toLowerCase()) + defaultIcon}`
    return iconUrl
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
    const serverURL = 'https://bsirp7gq.lc-cn-n1-shared.com'

    var settings = {
      "method": "GET",
      "headers": {
        "X-LC-Id": 'BsIRp7GQE8IZ5fkI0JRj8Vys-gzGzoHsz',
        "X-LC-Key": 'vla82YKrFnfwtuQfgoaDnzu9',
        "Content-Type": "application/json"
      },
    }

    fetch(`${serverURL}/1.1/classes/Comment?limit=6&order=-createdAt`,settings)
      .then(response => response.json())
      .then(data => {
        const valineArray = data.results.map(function (e) {
          return {
            'avatar': getIcon(e.QQAvatar, e.mail),
            'content': changeContent(e.comment),
            'nick': e.nick,
            'url': e.url + '#' + e.objectId,
            'date': e.updatedAt,
          }
        })
        saveToLocal.set('valine-newest-comments', JSON.stringify(valineArray), 10/(60*24))
        generateHtml(valineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      }) 
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('valine-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "visitor@touko.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>